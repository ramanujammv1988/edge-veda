---
phase: 04-release
plan: 03
type: execute
wave: 3
depends_on: ["04-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "pana score is 130+ points (pub.dev quality threshold)"
    - "Package installs successfully via flutter pub add edge_veda"
    - "Example from README works end-to-end in fresh Flutter project"
    - "XCFramework downloads from GitHub Releases without authentication"
    - "pub.dev page displays README, API docs, and example code"
  artifacts:
    - path: "https://pub.dev/packages/edge_veda"
      provides: "Published package listing"
      contains: "version 1.0.0"
    - path: "https://github.com/edgeveda/edge-veda-sdk/releases/tag/v1.0.0"
      provides: "GitHub Release with XCFramework binary"
      contains: "EdgeVedaCore-ios.xcframework.zip"
  key_links:
    - from: "pub.dev package"
      to: "GitHub Releases"
      via: "podspec preserve_paths documentation"
      pattern: "github.com.*releases.*EdgeVedaCore"
    - from: "Fresh Flutter project"
      to: "pub.dev package"
      via: "flutter pub add edge_veda"
      pattern: "edge_veda.*1.0.0"
---

<objective>
Execute the complete release process for Edge Veda SDK v1.0.0 by running the automated workflow, validating the published artifacts, and verifying end-to-end installation from pub.dev works correctly.

Purpose: Ship version 1.0.0 to production (pub.dev) with confidence that the package, documentation, and binary distribution all work correctly for end users. This completes the MVP delivery and enables developers to add `edge_veda: ^1.0.0` to their Flutter apps.

Output: Published package on pub.dev, XCFramework binary on GitHub Releases, validated installation flow, and confirmation that the 30-minute setup time goal is achievable.
</objective>

<execution_context>
@/Users/ram/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ram/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/ram/Documents/explore/edge/.planning/PROJECT.md
@/Users/ram/Documents/explore/edge/.planning/ROADMAP.md
@/Users/ram/Documents/explore/edge/.planning/STATE.md
@/Users/ram/Documents/explore/edge/.planning/phases/04-release/04-RESEARCH.md
@/Users/ram/Documents/explore/edge/.planning/phases/04-release/04-01-PLAN.md
@/Users/ram/Documents/explore/edge/.planning/phases/04-release/04-02-PLAN.md

# Files involved in validation
@/Users/ram/Documents/explore/edge/flutter/README.md
@/Users/ram/Documents/explore/edge/flutter/pubspec.yaml
@/Users/ram/Documents/explore/edge/scripts/prepare-release.sh
</context>

<tasks>

<task type="auto">
  <name>Run pana scoring and verify quality thresholds</name>
  <files></files>
  <action>
Execute pana (Package ANAlysis) tool to verify the package meets pub.dev quality standards before publishing.

Commands:
1. cd /Users/ram/Documents/explore/edge/flutter
2. flutter pub get (ensure dependencies resolved)
3. dart pub global activate pana (install if not already)
4. dart pub global run pana --no-warning . > /tmp/pana-report.txt
5. Parse output for score

Pana scoring breakdown (150 points max):
- Follow Dart file conventions: 20 points
- Provide documentation: 30 points
- Platform support: 20 points
- Pass static analysis: 40 points
- Support up-to-date dependencies: 40 points

Minimum acceptable score: 130/150 (pub.dev recommends 130+ for featured packages)

Expected deductions (acceptable):
- Platform support: -10 points (iOS only, Android not implemented yet)
- Missing some optional documentation

Blocking issues (must fix if flagged):
- Static analysis errors (run `flutter analyze --fatal-infos` first)
- Missing required files (README, CHANGELOG, LICENSE)
- Outdated dependencies
- Invalid pubspec.yaml

If score <130, review report and fix blocking issues. Documentation gaps are acceptable for v1.0.0 as README is comprehensive.
  </action>
  <verify>
cd /Users/ram/Documents/explore/edge/flutter && dart pub global run pana --no-warning . 2>&1 | tee /tmp/pana-report.txt
grep -E "Pana.*[0-9]+\s+points" /tmp/pana-report.txt
  </verify>
  <done>pana runs successfully, reports score >=130 points, no blocking errors flagged, report saved to /tmp/pana-report.txt</done>
</task>

<task type="auto">
  <name>Create and push v1.0.0 release tag</name>
  <files></files>
  <action>
Create the v1.0.0 Git tag and push to trigger the automated release workflow.

Pre-flight checks:
1. Verify working directory clean: `git status` (should show "nothing to commit, working tree clean")
2. Verify on main branch: `git branch --show-current` (should be "main")
3. Verify latest commit includes version updates from 04-01: `git log -1 --oneline`

Tag creation:
1. cd /Users/ram/Documents/explore/edge
2. Create annotated tag: `git tag -a v1.0.0 -m "Release v1.0.0 - Initial release of Edge Veda Flutter SDK"`
3. Push tag: `git push origin v1.0.0`

This triggers .github/workflows/release.yml which will:
1. Validate versions (prepare-release.sh)
2. Build XCFramework (~10-15 minutes)
3. Create GitHub Release with binary
4. Publish to pub.dev (~2-3 minutes)

Monitor workflow progress:
- GitHub Actions: https://github.com/edgeveda/edge-veda-sdk/actions
- Watch for: validate-release -> build-and-release-xcframework -> publish-to-pub-dev
- Expected total time: 15-20 minutes

If workflow fails:
1. Check logs in GitHub Actions UI
2. Common failures:
   - Version mismatch: Re-run prepare-release.sh locally
   - XCFramework build: Check CMake/Xcode availability
   - pub.dev publish: Verify PUB_TOKEN secret configured
3. Delete tag if needed: `git tag -d v1.0.0 && git push origin :refs/tags/v1.0.0`
4. Fix issue, re-tag, re-push
  </action>
  <verify>
git tag -l "v1.0.0"
git ls-remote --tags origin | grep "v1.0.0"
  </verify>
  <done>v1.0.0 tag exists locally and on remote, release workflow triggered and visible in GitHub Actions</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete automated release workflow (validate -> build XCFramework -> publish to pub.dev)</what-built>
  <how-to-verify>
Monitor the release workflow and verify all artifacts published correctly:

**Step 1: Check GitHub Actions Workflow**
1. Visit: https://github.com/edgeveda/edge-veda-sdk/actions
2. Find workflow run triggered by v1.0.0 tag push
3. Verify all 3 jobs completed successfully:
   - ✅ validate-release (should take ~2 min)
   - ✅ build-and-release-xcframework (should take ~12-15 min)
   - ✅ publish-to-pub-dev (should take ~2-3 min)
4. If any job fails, expand logs and identify error

**Step 2: Verify GitHub Release Created**
1. Visit: https://github.com/edgeveda/edge-veda-sdk/releases
2. Confirm "v1.0.0" release exists
3. Verify assets attached:
   - EdgeVedaCore-ios.xcframework.zip (~15-20MB)
4. Verify release notes populated from CHANGELOG.md

**Step 3: Verify pub.dev Package Published**
1. Visit: https://pub.dev/packages/edge_veda
2. Verify latest version shows "1.0.0"
3. Check pub.dev page displays:
   - README content (description, installation, usage)
   - Example tab (should show example/ code)
   - Changelog tab (should show CHANGELOG.md)
   - Scores tab (pana score >=130)
4. Verify "Installing" section shows: `flutter pub add edge_veda`

**Step 4: Check Package Metadata**
1. On pub.dev page, verify:
   - Repository link points to GitHub
   - License shows MIT
   - SDK constraints: Flutter >=3.16.0, Dart >=3.0.0
   - Platform support: iOS ✓
2. Check for any warnings or errors on pub.dev page

**Expected total time:** 15-25 minutes from tag push to pub.dev visibility

**Common issues and solutions:**

| Issue | Symptom | Solution |
|-------|---------|----------|
| Version mismatch | validate-release job fails | Run prepare-release.sh locally, check versions |
| XCFramework build fails | build-and-release-xcframework fails | Check Xcode/CMake logs, verify submodules |
| pub.dev publish fails | publish-to-pub-dev fails | Verify PUB_TOKEN secret, check pana score |
| Package not appearing | Workflow succeeds but no package | Wait 5-10 minutes, pub.dev has indexing delay |

**If workflow failed:** Describe the error in your response and we'll diagnose.
  </how-to-verify>
  <resume-signal>Type "verified" when all 3 steps pass, or describe any failures for diagnosis</resume-signal>
</task>

<task type="auto">
  <name>Test installation from pub.dev in fresh project</name>
  <files></files>
  <action>
Validate end-to-end installation flow by creating a fresh Flutter project and adding edge_veda from pub.dev.

Test procedure:
1. Create temporary test directory: `mkdir -p /tmp/edge-veda-install-test && cd /tmp/edge-veda-install-test`
2. Create new Flutter app: `flutter create test_app --platforms=ios`
3. cd test_app
4. Add package: `flutter pub add edge_veda`
5. Verify pubspec.yaml updated: `grep "edge_veda: ^1.0.0" pubspec.yaml`
6. Run pub get: `flutter pub get`
7. Verify package downloaded: `ls .dart_tool/package_config.json` (should contain edge_veda)
8. Check for XCFramework instruction: User should see podspec documentation or build-ios.sh requirement

Expected success indicators:
- `flutter pub add` exits 0
- Package resolves to version 1.0.0
- No dependency conflicts
- pubspec.yaml contains: `edge_veda: ^1.0.0`

Expected manual step (documented in README):
- User must download XCFramework: Either run `./scripts/build-ios.sh` OR download from GitHub Releases
- This is documented in podspec comments and README

If any step fails:
1. Check pub.dev package listing exists
2. Verify version 1.0.0 is latest
3. Check for dependency conflicts (ffi, path_provider versions)
4. Review pub resolution errors

Note: We're not testing actual inference in this task (that requires Xcode), just package installation flow. Full integration test requires iOS build environment.
  </action>
  <verify>
cd /tmp/edge-veda-install-test/test_app 2>/dev/null && grep -q "edge_veda.*1.0.0" pubspec.yaml && echo "Installation test passed" || echo "Installation test not run yet"
  </verify>
  <done>Fresh Flutter project successfully adds edge_veda ^1.0.0, pub get succeeds, package appears in dependencies</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete v1.0.0 release with package on pub.dev and XCFramework on GitHub Releases</what-built>
  <how-to-verify>
Perform final validation of the release to ensure the 30-minute setup goal is achievable:

**Step 1: Time the Setup Flow (Fresh Developer Perspective)**

Starting from zero (no repo cloned), time how long it takes to:
1. Visit https://pub.dev/packages/edge_veda
2. Read overview and installation instructions (~2 min)
3. In existing Flutter project: `flutter pub add edge_veda` (~1 min)
4. Download XCFramework:
   - Option A: `curl -L https://github.com/edgeveda/edge-veda-sdk/releases/download/v1.0.0/EdgeVedaCore-ios.xcframework.zip -o framework.zip` (~2 min)
   - Option B: Clone repo and run `./scripts/build-ios.sh --clean --release` (~10-12 min)
5. Follow README quick start example (~5 min)
6. Run on simulator or device (~3 min)

**Target: <30 minutes total**

**Step 2: Verify Documentation Quality**

Check that pub.dev page answers these questions WITHOUT clicking away:
- ✅ How do I install? (flutter pub add)
- ✅ What platforms supported? (iOS 13.0+)
- ✅ How do I use it? (Quick start code visible)
- ✅ Where's the XCFramework? (GitHub Releases link)
- ✅ What model to use? (README shows Llama 3.2 1B example)

**Step 3: Verify Example App**

From https://pub.dev/packages/edge_veda -> Example tab:
1. Verify example code is visible (not empty)
2. Check that example shows:
   - Model download
   - Simple generate() call
   - Error handling
3. Verify example is runnable (valid Dart/Flutter)

**Step 4: Check Scores**

On pub.dev -> Scores tab:
1. Overall score: Should be "good" or "great" (green)
2. Pana analysis: >=130 points
3. Popularity: Will be 0 initially (expected)
4. Likes: Encourage users to like the package

**Step 5: Verify Search Visibility**

1. Search pub.dev for "llm inference" - edge_veda should appear
2. Search pub.dev for "on-device ai" - edge_veda should appear
3. Search pub.dev for "llama flutter" - edge_veda should appear

**Success Criteria:**
- [ ] Setup completes in <30 minutes (target from ROADMAP.md)
- [ ] pub.dev page is informative and complete
- [ ] Example code is visible and correct
- [ ] Pana score >=130
- [ ] XCFramework downloadable from GitHub Releases
- [ ] No broken links in README on pub.dev

**If any issues found:** Note them for v1.0.1 patch release or documentation update.
  </how-to-verify>
  <resume-signal>Type "release-validated" when all checks pass, or list issues that need immediate fixing</resume-signal>
</task>

</tasks>

<verification>
Final release validation checklist:

**Package Quality:**
- [ ] pana score >=130 points
- [ ] pub.dev page renders correctly
- [ ] README displays properly
- [ ] Example code visible
- [ ] Changelog shows 1.0.0 entry

**Binary Distribution:**
- [ ] GitHub Release v1.0.0 exists
- [ ] EdgeVedaCore-ios.xcframework.zip attached (~15-20MB)
- [ ] Binary downloadable without authentication
- [ ] podspec documentation explains download requirement

**Installation Flow:**
- [ ] `flutter pub add edge_veda` works
- [ ] Package resolves to 1.0.0
- [ ] No dependency conflicts
- [ ] Setup time <30 minutes

**Documentation:**
- [ ] Quick start example works
- [ ] API documentation generated
- [ ] XCFramework download instructions clear
- [ ] Performance metrics documented (42.9 tok/s)

**Workflow:**
- [ ] release.yml workflow completed successfully
- [ ] All 3 jobs passed (validate, build, publish)
- [ ] No secrets exposed in logs
- [ ] Workflow can be re-run for patches
</verification>

<success_criteria>
- [ ] pana score >=130 points, no blocking issues
- [ ] Git tag v1.0.0 created and pushed
- [ ] GitHub Actions release workflow completed successfully
- [ ] GitHub Release v1.0.0 exists with XCFramework ZIP
- [ ] Package edge_veda@1.0.0 visible on pub.dev
- [ ] pub.dev page displays README, example, changelog correctly
- [ ] Fresh Flutter project can add edge_veda via flutter pub add
- [ ] XCFramework downloadable from GitHub Releases
- [ ] Setup time from zero to working inference <30 minutes
- [ ] All human verification checkpoints passed
</success_criteria>

<output>
After completion, create `.planning/phases/04-release/04-03-SUMMARY.md` documenting:
- Release execution timeline (tag push to pub.dev visibility)
- pana score achieved
- pub.dev package URL and initial statistics
- GitHub Release URL and artifact details
- Installation test results
- Setup time measurement
- Any issues discovered and workarounds
- Post-release monitoring recommendations
- Phase 4 completion confirmation

Additionally, update:
- `.planning/ROADMAP.md`: Mark Phase 4 complete
- `.planning/STATE.md`: Update position to "Phase 4 complete"
</output>
