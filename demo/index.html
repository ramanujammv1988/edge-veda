<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edge Veda Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f8f9fa;
            /* Light grey background */
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        .phone-frame {
            width: 100%;
            max-width: 400px;
            height: 100%;
            background: white;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Status Bar simulated */
        .status-bar {
            height: 44px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 16px;
            font-size: 14px;
            font-weight: 600;
        }

        .app-bar {
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #eee;
            position: relative;
        }

        .app-title {
            font-size: 18px;
            font-weight: 600;
        }

        .info-icon {
            position: absolute;
            right: 16px;
            color: #666;
            border: 1.5px solid #666;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            text-align: center;
            line-height: 18px;
            font-size: 12px;
            font-weight: bold;
        }

        /* Metrics Bar */
        .metrics-bar {
            background-color: #e8f5e9;
            /* Light green */
            padding: 8px 16px;
            font-size: 12px;
            color: #2e7d32;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .ready-text {
            color: #2e7d32;
            font-weight: 500;
        }

        .metrics-grid {
            display: flex;
            justify-content: space-between;
            padding-top: 4px;
        }

        .metric-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .metric-label {
            font-size: 10px;
            color: #5d8e61;
            margin-bottom: 2px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .metric-value {
            font-size: 16px;
            font-weight: 700;
            color: #1b5e20;
        }

        .blue-metric .metric-label {
            color: #5c8eb6;
        }

        .blue-metric .metric-value {
            color: #1565c0;
        }

        .metrics-bar.blue-theme {
            background-color: #e3f2fd;
        }

        /* Chat Area */
        .chat-area {
            flex: 1;
            padding: 20px 16px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message-row {
            display: flex;
            gap: 8px;
            align-items: flex-end;
        }

        .message-row.user {
            justify-content: flex-end;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bot-avatar {
            background-color: #90caf9;
        }

        .bot-icon {
            width: 20px;
            height: 20px;
            fill: #1565c0;
        }

        .user-avatar {
            background-color: #a5d6a7;
        }

        .user-icon {
            width: 20px;
            height: 20px;
            fill: #2e7d32;
        }

        .bubble {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 20px;
            font-size: 15px;
            line-height: 1.4;
            position: relative;
        }

        .user .bubble {
            background-color: #2196f3;
            /* Blue */
            color: white;
            border-bottom-right-radius: 4px;
        }

        .bot .bubble {
            background-color: #eeeeee;
            /* Grey */
            color: #212121;
            border-bottom-left-radius: 4px;
        }

        /* Input Area */
        .input-area {
            padding: 12px 16px;
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            gap: 12px;
            padding-bottom: 34px;
            /* Safe area */
            align-items: center;
        }

        .input-box {
            flex: 1;
            height: 44px;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 0 16px;
            display: flex;
            align-items: center;
            color: #999;
            font-size: 16px;
        }

        .send-btn {
            color: #5c6bc0;
            width: 24px;
            height: 24px;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }
    </style>
</head>

<body>
    <div class="phone-frame">
        <!-- App Bar -->
        <div class="app-bar">
            <!-- <span style="position: absolute; left: 16px;">9:41</span> -->
            <div class="app-title">Edge Veda Chat</div>
            <div class="info-icon">i</div>
        </div>

        <!-- Metrics -->
        <div class="metrics-bar blue-theme">
            <!-- <div class="ready-text">Ready to chat!</div> -->
            <div class="metrics-grid">
                <div class="metric-item blue-metric">
                    <div class="metric-label">‚è± TTFT</div>
                    <div class="metric-value" id="ttft">0ms</div>
                </div>
                <div class="metric-item blue-metric">
                    <div class="metric-label">üöÄ Speed</div>
                    <div class="metric-value" id="speed">0 tok/s</div>
                </div>
                <div class="metric-item blue-metric">
                    <div class="metric-label">üíæ Memory</div>
                    <div class="metric-value" id="memory">0 MB</div>
                </div>
            </div>
        </div>

        <!-- Chat -->
        <div class="chat-area" id="chatArea">
            <!-- Initial System Message -->
            <div
                style="align-self: center; background: #f5f5f5; padding: 6px 12px; border-radius: 12px; color: #666; font-size: 12px; margin-bottom: 10px;">
                Edge Veda initialized successfully. Start chatting!
            </div>
        </div>

        <!-- Input -->
        <div class="input-area">
            <div class="input-box" id="inputBox">Type a message...</div>
            <svg class="send-btn" viewBox="0 0 24 24" fill="currentColor">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
            </svg>
        </div>
    </div>

    <script>
        // Assets
        const botIcon = `<svg class="bot-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-9h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z" fill="#1976d2"/></svg>`;
        const userIcon = `<svg class="user-icon" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" fill="#388e3c"/></svg>`;

        const chatArea = document.getElementById('chatArea');
        const ttftEl = document.getElementById('ttft');
        const speedEl = document.getElementById('speed');
        const memEl = document.getElementById('memory');
        const inputBox = document.getElementById('inputBox');

        function addMessage(text, isUser) {
            const row = document.createElement('div');
            row.className = `message-row ${isUser ? 'user' : 'bot'} animate-in`;

            const avatar = document.createElement('div');
            avatar.className = `avatar ${isUser ? 'user-avatar' : 'bot-avatar'}`;
            avatar.innerHTML = isUser ? userIcon : botIcon;

            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            bubble.textContent = text;

            if (isUser) {
                row.appendChild(bubble);
                row.appendChild(avatar);
            } else {
                row.appendChild(avatar);
                row.appendChild(bubble);
            }

            chatArea.appendChild(row);
            chatArea.scrollTop = chatArea.scrollHeight;
            return bubble;
        }

        async function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        async function typeText(element, text, speedTokPerSec = 30) {
            // Speed is tokens per sec. Average token is 4 chars.
            // Chars per sec = speed * 4.
            // Ms per char = 1000 / (speed * 4).
            const msPerChar = 1000 / (speedTokPerSec * 4);

            for (let i = 0; i < text.length; i++) {
                element.textContent = text.substring(0, i + 1);
                chatArea.scrollTop = chatArea.scrollHeight;

                // Add some jitter for realism
                const variance = Math.random() * 10 - 5;
                await sleep(msPerChar + variance);
            }
        }

        async function runDemo() {
            await sleep(3000);

            // 1. User types
            const question = "What is the capital of France?";
            inputBox.style.color = "#000";
            inputBox.textContent = "";
            for (let i = 0; i < question.length; i++) {
                inputBox.textContent += question[i];
                await sleep(50);
            }
            await sleep(400);
            inputBox.textContent = "Type a message..."; // Reset
            inputBox.style.color = "#999";

            // 2. Add user message
            addMessage(question, true);

            // 3. Processing delay (TTFT)
            ttftEl.textContent = "0ms";
            await sleep(200); // Short pause
            const startTime = Date.now();

            // Simulate TTFT wait
            await sleep(600); // Fast TTFT

            ttftEl.textContent = "180ms";
            memEl.textContent = "1178 MB";
            speedEl.textContent = "0.0 tok/s";

            // 4. Bot starts typing
            const bubble = addMessage("", false);
            bubble.classList.add('typing-cursor');

            const fullResponse = `The capital of France is Paris.

Paris is a major global city known for its art, fashion, gastronomy, and culture. Its 19th-century cityscape is crisscrossed by wide boulevards and the River Seine.

Beyond such landmarks as the Eiffel Tower and the 12th-century, Gothic Notre-Dame cathedral, the city is known for its cafe culture and designer boutiques along the Rue du Faubourg Saint-Honor√©.`;

            // Start metrics update loop
            let chars = 0;
            const updateMetrics = setInterval(() => {
                const elapsed = (Date.now() - startTime) / 1000;
                // Ramp up speed visualization
                if (elapsed > 0.5) {
                    speedEl.textContent = "33.0 tok/s";
                }
            }, 100);

            await typeText(bubble, fullResponse, 33);

            clearInterval(updateMetrics);
            bubble.classList.remove('typing-cursor');

            await sleep(2000); // Hold final state
        }

        window.onload = runDemo;
    </script>
</body>

</html>